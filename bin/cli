#!/usr/bin/env node --harmony

let cli = require('commander');
let updateNotifier = require('update-notifier');
let utils  = require('rsx-common');

let flatten = utils._.flatten;

let commands = require('../src/getCommands')();
let pkg = require('../package.json');

updateNotifier({ pkg }).notify();

cli.version(pkg.version);

const addCommand = (command) => {
    cli
        .command(command.name)
        .usage(command.usage)
        .description(command.description)
        .action(function runAction() {
            command.func(arguments);
        });
}

flatten(commands).forEach(addCommand);

cli.parse(process.argv);
